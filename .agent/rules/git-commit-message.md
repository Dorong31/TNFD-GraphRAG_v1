---
trigger: always_on
---

# Git 커밋 메시지 규칙

## 커밋 메시지 표출 시점

- 기본적으로 코드 수정 및 버전 업데이트 시 커밋 메시지 제안
- **코드 수정 → iterations 폴더 문서 작성 (walkthrough 포함) → 커밋 메시지 제안**
  - 모든 변경 사항과 문서를 하나의 커밋으로 묶기 위함
- 사용자 승인 후 커밋 및 푸시 진행

## 커밋 메시지 형식

커밋 메시지는 다음 형식을 따릅니다:

```
{수정의 종류}: ({버전}) {제목}

{주요 변경 사항(불렛)}
```

### 구성 요소

1. **수정의 종류**
   - `feat`, `fix`, `docs`, `refactor`, `test`, `chore` 등 일반적인 구분에 따름
   - 특정 기능이나 폴더에 한정된 변경일 경우 괄호 안에 한 단어로 기재
   - 예시: `feat(UI)`, `docs(rules)`, `fix(parser)`

2. **버전**
   - `v0.0.0.0` 형식의 업데이트된 코드 버전 기재
   - 버전 업데이트 없는 경우 생략
   - 두 개 이상의 버전이 동시에 업데이트된 경우 `&`로 연결
   - 예시: `(v0.1.4.0)`, `(v0.1.4.0 & v0.1.4.1)`

3. **제목**
   - 수정된 사항을 대표하는 **한국어** 제목 작성
   - 간결하고 명확하게 작성

4. **주요 변경 사항**
   - 제목에 줄바꿈 이후, 불렛 포인트(`-`) 형식으로 작성
   - **한국어**로 작성
   - 각 버전별로 구분하여 작성 (여러 버전 포함 시)

## 특별 규칙

### 다중 버전 업데이트

이전 커밋 대비 버전이 두 번 이상 업데이트된 경우, 각 버전에 대한 설명을 모두 포함합니다.

**형식:**
```
{수정의 종류}: (v{버전1} & v{버전2}) {제목}

v{버전1} 변경사항
- 변경 사항 1
- 변경 사항 2

v{버전2} 변경사항
- 변경 사항 1
- 변경 사항 2
```

## 예시

### 단일 버전 업데이트
```
feat: (v0.1.4.0) 로컬 캐싱 및 결과 저장

- 기능 추가: PDF 인덱스 로컬 캐싱 및 분석 결과 자동 저장
- PDF 파일 해싱(파일 내용 기반 식별)
- 캐시 로드/생성 분기 (캐시 로드 시 UI 피드백)
- 분석 결과 자동 저장 (메타데이터 포함 JSON 구조 저장)
- gitignore에 로컬 캐시 폴더 (.cache/) 추가
```

### 다중 버전 업데이트
```
feat: (v0.1.4.0 & v0.1.4.1) 로컬 캐싱 및 결과 저장 & Gemini Embeddings 모델 업그레이드

v0.1.4.0 변경사항
- 기능 추가: PDF 인덱스 로컬 캐싱 및 분석 결과 자동 저장
- PDF 파일 해싱(파일 내용 기반 식별)
- 캐시 로드/생성 분기 (캐시 로드 시 UI 피드백)
- 분석 결과 자동 저장 (메타데이터 포함 JSON 구조 저장)
- gitignore에 로컬 캐시 폴더 (.cache/) 추가

v0.1.4.1 변경사항
- 임베딩 모델: text-embedding-004 → gemini-embedding-001로 전환
- MRL(Matryoshka Representation Learning) 기반 차원 축소 지원
- output_dimensionality=768 명시적 설정 추가
- Google Gemini API v1beta 호환성 확보 (404 에러 해결)
- iterations 문서 정리: v0.1.4.0, v0.1.4.1 폴더 생성
- Known Issue: 빈 텍스트 임베딩 에러 (다음 버전에서 수정 예정)
```

### 비버전 업데이트
```
docs: README 업데이트

- 설치 가이드 개선
- 사용 예시 추가
- FAQ 섹션 추가
```

### 특정 기능 수정
```
fix(parser): PyMuPDF 파서 에러 처리 개선

- 빈 페이지 처리 로직 추가
- 예외 처리 강화
- 로깅 메시지 개선
```